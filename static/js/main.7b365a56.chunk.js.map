{"version":3,"sources":["../../src/index.tsx","../../src/useInterval.tsx","App.js","index.js"],"names":["input","config","m","s","h","onDone","recurring","timerDurationInMs","updateState","forceUpdate","callback","delay","savedCallback","React.useRef","React.useEffect","current","id","setInterval","clearInterval","started","setStarted","paused","setPaused","endTime","setEndTime","remainingDurationInMs","Math","max","diff","pausedRemainingDurationInMs","start","add","unPause","stop","rewind","reset","time","utc","Container","children","style","height","width","display","justifyContent","alignItems","flexDirection","border","marginBottom","RecuringTimer","useCountdown","console","warn","format","marginTop","onClick","Timer","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.7b365a56.chunk.js","sourcesContent":["// @ts-expect-error\nimport React, { useState, useEffect, useRef, useCallback } from \"react\";\n\nimport moment, { Moment } from \"moment\";\nimport { useInterval } from \"./useInterval\";\nimport {\n  CountdownInput,\n  CountdownConfig,\n  CountdownReturnValues,\n} from \"./types\";\n\nexport const useCountdown = (\n  input: CountdownInput = {},\n  config: CountdownConfig = {}\n): CountdownReturnValues => {\n  const { m = 0, s = 0, h = 0 } = input;\n  const { onDone = () => true, recurring } = config;\n  const timerDurationInMs = h * 60 * 60 * 1000 + m * 60 * 1000 + s * 1000;\n\n  // timers are tied to re-render unfortunately in react native.\n  const [, updateState] = useState();\n  const forceUpdate = useCallback(() => updateState({}), []);\n  useInterval(() => forceUpdate(), 1000);\n\n  const [started, setStarted] = useState(false);\n  const [paused, setPaused] = useState(false);\n\n  const [endTime, setEndTime] = useState<Moment>();\n\n  const remainingDurationInMs = endTime && Math.max(endTime.diff(moment()), 0);\n\n  const pausedRemainingDurationInMs = useRef<number | undefined>(\n    timerDurationInMs\n  );\n\n  const startOrUnpause = () => started && paused ? unPause() : start()\n\n  const start = () => {\n    setStarted(true);\n    pausedRemainingDurationInMs.current = timerDurationInMs\n    setEndTime(moment().add(timerDurationInMs, \"milliseconds\"));\n  };\n\n  const unPause = () => {\n    setPaused(false)\n    setEndTime(moment().add(pausedRemainingDurationInMs.current, \"milliseconds\"))\n  }\n\n  const stop = () => {\n    pausedRemainingDurationInMs.current = remainingDurationInMs;\n    setPaused(true);\n  };\n\n  const resetOrRewind = () => paused ? reset() : rewind()\n\n  const rewind = () => {\n    setEndTime(moment().add(timerDurationInMs, \"milliseconds\"));\n  }\n\n  const reset = () => {\n    setStarted(false)\n    setPaused(false)\n    setEndTime(moment().add(timerDurationInMs, \"milliseconds\"));\n  };\n\n  useEffect(() => {\n    if (recurring && remainingDurationInMs === 0) {\n      onDone();\n      rewind();\n    } else if (remainingDurationInMs === 0) {\n      onDone();\n      stop();\n    }\n  }, [remainingDurationInMs]);\n\n  const time = () => {\n    if (started && paused && pausedRemainingDurationInMs.current) {\n      return moment.utc(pausedRemainingDurationInMs.current);\n    } else if (started) {\n      return moment.utc(remainingDurationInMs);\n    } else {\n      return moment.utc(timerDurationInMs);\n    }\n  };\n\n  return {\n    time: time(),\n    start: startOrUnpause,\n    stop,\n    started,\n    paused,\n    reset: resetOrRewind,\n  };\n};\n","import * as React from \"react\";\nexport const useInterval = (callback: () => any, delay: number = 1000) => {\n  const savedCallback = React.useRef<() => any>(() => true);\n\n  // Remember the latest callback.\n  React.useEffect(() => {\n    savedCallback.current = callback;\n  }, [callback]);\n\n  // Set up the interval.\n  React.useEffect(() => {\n    function tick() {\n      savedCallback.current();\n    }\n    let id = setInterval(tick, delay);\n    return () => clearInterval(id);\n  }, [delay]);\n};\n","import React from \"react\";\n\nimport { useCountdown } from \"use-moment-countdown\";\n\nconst Container = ({children}) => (\n  <div\n    style={{\n      height: 200,\n      width: 200,\n      display: \"flex\",\n      justifyContent: \"center\",\n      alignItems: \"center\",\n      flexDirection: \"column\",\n      border: \"solid 1px black\",\n      marginBottom: 50\n    }}\n  >{children}</div>\n);\n\nconst RecuringTimer = () => {\n  const { start, time, stop, reset } = useCountdown(\n    { s: 10 },\n    {\n      recurring: true,\n      onDone: () => console.warn(\"You can pass an onDone function like this!\"),\n    }\n  );\n  return (\n    <Container>\n      {time.format(\"mm:ss\")}\n      <button style={{ marginTop: 20 }} onClick={start}>\n        Start Recuring Timer\n      </button>\n      <button style={{ marginTop: 20 }} onClick={stop}>\n        Stop\n      </button>\n      <button style={{ marginTop: 20 }} onClick={reset}>\n        Reset\n      </button>\n    </Container>\n  );\n};\n\nconst Timer = () => {\n  const { start, time, stop, reset } = useCountdown(\n    { s: 10 },\n    {\n      onDone: () => console.warn(\"You can pass an onDone function like this!\"),\n    }\n  );\n  return (\n    <Container>\n      {time.format(\"mm:ss\")}\n      <button style={{ marginTop: 20 }} onClick={start}>\n        Start Regular Timer\n      </button>\n      <button style={{ marginTop: 20 }} onClick={stop}>\n        Stop\n      </button>\n      <button style={{ marginTop: 20 }} onClick={reset}>\n        Reset\n      </button>\n    </Container>\n  );\n};\n\nconst App = () => {\n  return (\n    <div\n      style={{\n        height: \"100vh\",\n        width: \"100vw\",\n        display: \"flex\",\n        justifyContent: \"space-around\",\n        alignItems: \"center\",\n      }}\n    >\n      <RecuringTimer />\n      <Timer />\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}